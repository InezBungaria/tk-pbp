{% extends 'base.html' %}
{% load static %}

<!DOCTYPE html>
<html lang="en">

    <head>
        {% block meta %}
        <title>Deposit Sampah</title>
        {% endblock meta %}
    </head>

    <body>
        {% block content %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="{% static 'js/deposit.js' %}"></script>
        <script>
            $(document).ready(() => setup());
        </script>

        <!-- Page Header -->
        <br>
        {% if is_logged_in %}
            <p> Welcome back {{ username }}!</p>
        {% endif %}
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
        <br>

        <!-- The button to open modal -->
        {% if is_logged_in %}
            <label for="form-modal" class="btn modal-button">Make Deposit</label>
        {% else %}
            <a href="{% url 'banksampah:login' %}"><button class="btn">Login to Make Deposit</button></a>
        {% endif %}


        <!-- Put this part before </body> tag -->
        <input type="checkbox" id="form-modal" class="modal-toggle" />
        <label class="modal" for="form-modal">
            <label class="modal-box bg-white">
                <label for="form-modal" class="btn btn-sm btn-circle absolute right-2 top-2 text-black bg-white">âœ•</label>
                <!-- New Deposit Form -->
                <table>
                    <form id="depositForm" method="POST" action="">
                    {% csrf_token %}
                        <tr>
                            <th>Field Name</th>
                            <th>Field</th>
                        </tr>
                        {{ form.as_table }}
                    </form>
                </table>
                <tr colspan="2"><button class="btn" onclick="submitDeposit(depositForm)">Submit</button></tr>
            </label>
        </label>

        <!-- Recent Deposit History (asynchronously loaded)-->
        {% if is_logged_in %}
            <p> {{ username }}'s Recent Deposits </p>
            <table>
                <tr>
                    <th>Date</th>
                    <th>Type</th>
                    <th>Mass</th>
                </tr>
                <tbody id="history-table"></tbody>
            </table>
        {% else %}
            <p> Login to see your recent deposits! </p>
        {% endif %}
        <br>

        <!-- Message info / alert (asynchronously loaded) -->
        {% if messages %}
            {% for message in messages %}
                <h1>{{message}}</h1>
            {% endfor %}
        {% endif %}

        {% endblock content %}
    </body>
</html>